# [ä»»åŠ¡-09-05-12-10] VULCAæ¡†æ¶æœ¬åœ°é›†æˆå®æ–½

**åˆ›å»ºæ—¶é—´**: 2025-09-05 12:10
**çŠ¶æ€**: è®¡åˆ’ä¸­
**ä¼˜å…ˆçº§**: é«˜
**é¢„è®¡å®Œæˆæ—¶é—´**: 2025-09-05 18:00

## éœ€æ±‚æ¥æº
åŸºäºä¹‹å‰å®Œæˆçš„AAAI 2026 Demo Paperå‡†å¤‡å·¥ä½œï¼Œéœ€è¦å°†VULCAæ¡†æ¶ï¼ˆ47ç»´è¯„æµ‹ç³»ç»Ÿï¼‰å®Œæ•´è¿ç§»åˆ°æœ¬åœ°websiteé¡¹ç›®ï¼Œå®ç°ä»å­¦æœ¯ç ”ç©¶åˆ°ç”Ÿäº§ç³»ç»Ÿçš„å®Œæ•´é›†æˆã€‚

## ç›®æ ‡å’ŒèŒƒå›´
**ä¸»è¦ç›®æ ‡**: 
- å°†VULCA 47ç»´è¯„æµ‹ç³»ç»Ÿå®Œæ•´é›†æˆåˆ°æœ¬åœ°æ–‡å¿ƒå¢¨éŸµå¹³å°
- å®ç°6ç»´åˆ°47ç»´çš„è¯„æµ‹ç»´åº¦æ‰©å±•
- ç¡®ä¿æ‰€æœ‰åŠŸèƒ½åœ¨æœ¬åœ°ç¯å¢ƒæ­£å¸¸è¿è¡Œ
- é€šè¿‡Playwrightè‡ªåŠ¨åŒ–æµ‹è¯•éªŒè¯

**èŒƒå›´**: 
- VULCAåç«¯æ¨¡å—è¿ç§»ï¼ˆ4ä¸ªæ ¸å¿ƒæ–‡ä»¶ï¼‰
- å‰ç«¯ç»„ä»¶è¿ç§»ï¼ˆ2ä¸ªReactç»„ä»¶ï¼‰
- æ•°æ®æ–‡ä»¶è¿ç§»ï¼ˆ15ä¸ªæ¨¡å‹è¯„åˆ†+10ä¸ªæ¡ˆä¾‹ï¼‰
- APIç«¯ç‚¹é›†æˆå’Œè·¯ç”±é…ç½®
- è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ç¼–å†™

**æ’é™¤**: 
- ä¸ä¿®æ”¹ç°æœ‰6ç»´è¯„æµ‹ç³»ç»Ÿ
- ä¸è¿›è¡Œæ•°æ®åº“æ¶æ„é‡æ„
- ä¸ä¿®æ”¹ç°æœ‰ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

## å…³é”®çº¦æŸ
- ä¿æŒç°æœ‰ç³»ç»Ÿç¨³å®šæ€§
- æœ€å°åŒ–ä»£ç æ”¹åŠ¨
- ç¡®ä¿å‘åå…¼å®¹
- æ‰€æœ‰æµ‹è¯•å¿…é¡»é€šè¿‡

## æ¶æ„å½±å“è¯„ä¼°
- **åç«¯**: æ–°å¢4ä¸ªVULCAæ¨¡å—ï¼Œæ‰©å±•APIè·¯ç”±
- **å‰ç«¯**: æ–°å¢2ä¸ªReactç»„ä»¶ï¼Œæ·»åŠ æ–°è·¯ç”±
- **æ•°æ®åº“**: å¯èƒ½éœ€è¦æ–°å¢VULCAè¯„åˆ†è¡¨
- **éƒ¨ç½²**: æ— å½±å“ï¼Œä½¿ç”¨ç°æœ‰æ¶æ„

## å…³é”®å†³ç­–è®°å½•
- **å†³ç­–1: æ¨¡å—åŒ–è¿ç§»**: ä¿æŒVULCAä½œä¸ºç‹¬ç«‹æ¨¡å—ï¼Œä¸ä¸ç°æœ‰ä»£ç æ··åˆ
- **å†³ç­–2: æ•°æ®éš”ç¦»**: VULCAæ•°æ®ç‹¬ç«‹å­˜å‚¨ï¼Œä¸å½±å“ç°æœ‰6ç»´æ•°æ®
- **å†³ç­–3: æ¸è¿›å¼é›†æˆ**: å…ˆè¿ç§»åç«¯ï¼Œå†è¿ç§»å‰ç«¯ï¼Œæœ€åé›†æˆæµ‹è¯•

## æ‰§è¡Œè®¡åˆ’

### è®¡åˆ’ v1 - è¯¦ç»†å®æ–½æ­¥éª¤ï¼ˆåŸºç¡€ç‰ˆï¼‰

#### Phase 1: ç¯å¢ƒå‡†å¤‡ä¸ä¾èµ–æ£€æŸ¥ (30åˆ†é’Ÿ)
1. æ£€æŸ¥Pythonç¯å¢ƒç‰ˆæœ¬ï¼ˆéœ€è¦3.8+ï¼‰
2. æ£€æŸ¥Node.jsç¯å¢ƒï¼ˆéœ€è¦18+ï¼‰
3. å®‰è£…VULCAç‰¹å®šä¾èµ–åŒ…
4. éªŒè¯æ•°æ®åº“è¿æ¥
5. ç¡®è®¤APIå¯†é’¥é…ç½®

#### Phase 2: åç«¯VULCAæ¨¡å—è¿ç§» (1å°æ—¶)
1. åˆ›å»º `wenxin-backend/app/vulca/` ç›®å½•
2. å¤åˆ¶æ ¸å¿ƒæ–‡ä»¶ï¼š
   - `vulca_core_adapter.py` - 6Dâ†’47Dæ‰©å±•ç®—æ³•
   - `vulca_service.py` - å¼‚æ­¥æœåŠ¡å±‚
   - `vulca_model.py` - SQLAlchemyæ¨¡å‹
   - `vulca.py` - FastAPIè·¯ç”±
3. æ›´æ–° `app/main.py` æ·»åŠ VULCAè·¯ç”±
4. åˆ›å»ºæ•°æ®åº“è¿ç§»è„šæœ¬
5. è¿è¡Œæ•°æ®åº“è¿ç§»

#### Phase 3: å‰ç«¯ç»„ä»¶è¿ç§» (1å°æ—¶)
1. åˆ›å»º `wenxin-moyun/src/pages/vulca/` ç›®å½•
2. å¤åˆ¶ç»„ä»¶æ–‡ä»¶ï¼š
   - `VULCADemoPage.tsx` - ä¸»æ¼”ç¤ºé¡µé¢
   - `ComparisonView.tsx` - å¯¹æ¯”è§†å›¾ç»„ä»¶
3. å®‰è£…å‰ç«¯ä¾èµ–ï¼ˆrechartsç­‰ï¼‰
4. æ›´æ–°è·¯ç”±é…ç½®æ·»åŠ VULCAé¡µé¢
5. æ›´æ–°å¯¼èˆªèœå•

#### Phase 4: æ•°æ®è¿ç§»ä¸åˆå§‹åŒ– (45åˆ†é’Ÿ)
1. åˆ›å»º `data/vulca/` ç›®å½•ç»“æ„
2. è¿ç§»15ä¸ªæ¨¡å‹çš„47ç»´è¯„åˆ†æ•°æ®
3. è¿ç§»10ä¸ªdemoæ¡ˆä¾‹
4. è¿è¡Œæ•°æ®å¯¼å…¥è„šæœ¬
5. éªŒè¯æ•°æ®å®Œæ•´æ€§

#### Phase 5: é›†æˆæµ‹è¯• (45åˆ†é’Ÿ)
1. å¯åŠ¨åç«¯æœåŠ¡å™¨
2. æµ‹è¯•VULCA APIç«¯ç‚¹
3. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
4. æµ‹è¯•å‰ç«¯é¡µé¢æ¸²æŸ“
5. æµ‹è¯•6ç»´vs47ç»´å¯¹æ¯”åŠŸèƒ½
6. æµ‹è¯•æ•°æ®åŠ è½½å’Œå±•ç¤º

#### Phase 6: Playwrightè‡ªåŠ¨åŒ–éªŒè¯ (1å°æ—¶)
è¯¦è§ä¸‹æ–¹Playwrightæµ‹è¯•æ–¹æ¡ˆ

### è®¡åˆ’ v2 - è¶…è¯¦ç»†å®æ–½æ­¥éª¤ï¼ˆUltra Thinkç‰ˆï¼‰

#### ğŸš€ Phase 0: é¢„æ£€æŸ¥ä¸ç¯å¢ƒæ‰«æ (15åˆ†é’Ÿ)

##### 0.1 ç³»ç»Ÿç¯å¢ƒéªŒè¯
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version  # æœŸæœ›: Python 3.8-3.13

# æ£€æŸ¥pipç‰ˆæœ¬
pip --version

# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version  # æœŸæœ›: v18.xæˆ–æ›´é«˜

# æ£€æŸ¥npmç‰ˆæœ¬
npm --version  # æœŸæœ›: 9.xæˆ–æ›´é«˜

# æ£€æŸ¥GitçŠ¶æ€
cd I:/website
git status  # ç¡®ä¿å·¥ä½œåŒºå¹²å‡€
git branch  # ç¡®è®¤åœ¨æ­£ç¡®åˆ†æ”¯
```

##### 0.2 é¡¹ç›®ç»“æ„æ‰«æ
```bash
# æ‰«æç°æœ‰VULCAç›¸å…³æ–‡ä»¶
find I:/website -name "*vulca*" -type f 2>/dev/null

# æ£€æŸ¥EMNLP2025-VULCAæºä»£ç 
ls -la I:/website/EMNLP2025-VULCA/src/

# æ£€æŸ¥ä»»åŠ¡æ–‡æ¡£
cat I:/website/tasks/active/9-5-1-48-AAAI-demo-integration.md | grep -A 5 "åˆ›å»º.*\.py"
```

##### 0.3 ä¾èµ–åŒ…é¢„æ£€æŸ¥
```bash
# åç«¯ä¾èµ–æ£€æŸ¥
cd I:/website/wenxin-backend
pip list | grep -E "(fastapi|sqlalchemy|pydantic|asyncio)"

# å‰ç«¯ä¾èµ–æ£€æŸ¥
cd I:/website/wenxin-moyun
npm list | grep -E "(recharts|@types/react|tailwindcss)"
```

#### ğŸ”§ Phase 1: æ·±åº¦ç¯å¢ƒå‡†å¤‡ (45åˆ†é’Ÿ)

##### 1.1 Pythonç¯å¢ƒé…ç½®
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœéœ€è¦ï¼‰
cd I:/website/wenxin-backend
python -m venv venv_vulca  # éš”ç¦»çš„VULCAç¯å¢ƒ
source venv_vulca/bin/activate  # Windows: venv_vulca\Scripts\activate

# å®‰è£…VULCAæ ¸å¿ƒä¾èµ–
pip install numpy>=1.21.0
pip install pandas>=1.3.0
pip install scikit-learn>=1.0.0
pip install torch>=1.9.0  # å¦‚æœéœ€è¦æ·±åº¦å­¦ä¹ 
pip install transformers>=4.20.0  # å¦‚æœéœ€è¦è¯­è¨€æ¨¡å‹
```

##### 1.2 æ•°æ®åº“å‡†å¤‡
```python
# åˆ›å»ºæ•°æ®åº“è¿ç§»è„šæœ¬: wenxin-backend/migrations/add_vulca_tables.py
"""
from sqlalchemy import create_engine, Column, Integer, String, Float, JSON, DateTime, ForeignKey
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import relationship
from datetime import datetime

Base = declarative_base()

class VULCAEvaluation(Base):
    __tablename__ = 'vulca_evaluations'
    
    id = Column(Integer, primary_key=True, index=True)
    model_id = Column(Integer, ForeignKey('models.id'))
    evaluation_date = Column(DateTime, default=datetime.utcnow)
    
    # 6ç»´åŸå§‹è¯„åˆ†
    original_6d_scores = Column(JSON)  # {"creativity": 85, "technique": 90, ...}
    
    # 47ç»´æ‰©å±•è¯„åˆ†
    extended_47d_scores = Column(JSON)  # {"dim1": 0.85, "dim2": 0.90, ...}
    
    # 8æ–‡åŒ–è§†è§’è¯„åˆ†
    cultural_perspectives = Column(JSON)  # {"western": 0.8, "eastern": 0.9, ...}
    
    # å…ƒæ•°æ®
    metadata = Column(JSON)  # ç®—æ³•ç‰ˆæœ¬ã€å‚æ•°ç­‰
    
    # å…³ç³»
    model = relationship("Model", back_populates="vulca_evaluations")

class VULCADimension(Base):
    __tablename__ = 'vulca_dimensions'
    
    id = Column(Integer, primary_key=True)
    dimension_id = Column(String(50), unique=True, index=True)
    dimension_name = Column(String(100))
    category = Column(String(50))  # æ‰€å±ç±»åˆ«
    description = Column(String(500))
    weight = Column(Float, default=1.0)  # æƒé‡
    cultural_relevance = Column(JSON)  # å„æ–‡åŒ–ç›¸å…³æ€§
"""
```

##### 1.3 é…ç½®æ–‡ä»¶å‡†å¤‡
```yaml
# åˆ›å»ºé…ç½®æ–‡ä»¶: wenxin-backend/configs/vulca_config.yaml
vulca:
  version: "2.0"
  
  dimensions:
    original: 6
    extended: 47
    
  cultural_perspectives:
    - western
    - eastern
    - african
    - latin_american
    - middle_eastern
    - south_asian
    - oceanic
    - indigenous
    
  algorithms:
    expansion:
      method: "correlation_matrix"
      base_dimensions: ["creativity", "technique", "emotion", "context", "innovation", "impact"]
      expansion_factor: 7.83
      
    scoring:
      normalization: "min_max"
      aggregation: "weighted_mean"
      
  api:
    endpoints:
      base: "/api/v1/vulca"
      evaluation: "/evaluate"
      comparison: "/compare"
      dimensions: "/dimensions"
      
  visualization:
    charts:
      - radar
      - heatmap
      - parallel_coordinates
      - scatter_matrix
```

#### ğŸ’¾ Phase 2: åç«¯VULCAæ ¸å¿ƒæ¨¡å—å®ç° (90åˆ†é’Ÿ)

##### 2.1 åˆ›å»ºç›®å½•ç»“æ„
```bash
# åˆ›å»ºVULCAæ¨¡å—ç›®å½•
mkdir -p I:/website/wenxin-backend/app/vulca
mkdir -p I:/website/wenxin-backend/app/vulca/core
mkdir -p I:/website/wenxin-backend/app/vulca/services
mkdir -p I:/website/wenxin-backend/app/vulca/models
mkdir -p I:/website/wenxin-backend/app/vulca/schemas
mkdir -p I:/website/wenxin-backend/app/vulca/utils
```

##### 2.2 æ ¸å¿ƒé€‚é…å™¨å®ç°
```python
# æ–‡ä»¶: wenxin-backend/app/vulca/core/vulca_core_adapter.py
"""
import numpy as np
from typing import Dict, List, Tuple
import json

class VULCACoreAdapter:
    '''VULCA 6Dåˆ°47Dæ™ºèƒ½æ‰©å±•é€‚é…å™¨'''
    
    def __init__(self):
        self.correlation_matrix = self._load_correlation_matrix()
        self.dimension_mapping = self._load_dimension_mapping()
        self.cultural_weights = self._load_cultural_weights()
        
    def _load_correlation_matrix(self) -> np.ndarray:
        '''åŠ è½½6x47ç›¸å…³æ€§çŸ©é˜µ'''
        # å®é™…å®ç°ä»æ–‡ä»¶åŠ è½½
        matrix = np.random.rand(6, 47)  # ç¤ºä¾‹
        return matrix / matrix.sum(axis=0)  # å½’ä¸€åŒ–
        
    def _load_dimension_mapping(self) -> Dict:
        '''åŠ è½½ç»´åº¦æ˜ å°„å…³ç³»'''
        return {
            'creativity': ['originality', 'imagination', 'innovation', ...],
            'technique': ['skill', 'precision', 'mastery', ...],
            # ... å…¶ä»–æ˜ å°„
        }
        
    def expand_6d_to_47d(self, scores_6d: Dict[str, float]) -> Dict[str, float]:
        '''æ ¸å¿ƒæ‰©å±•ç®—æ³•'''
        # 1. å°†6Dåˆ†æ•°è½¬æ¢ä¸ºå‘é‡
        vec_6d = np.array([scores_6d[dim] for dim in self.base_dims])
        
        # 2. åº”ç”¨ç›¸å…³æ€§çŸ©é˜µ
        vec_47d = np.dot(vec_6d, self.correlation_matrix)
        
        # 3. æ·»åŠ å™ªå£°å’Œå˜åŒ–
        noise = np.random.normal(0, 0.05, 47)
        vec_47d = vec_47d + noise
        
        # 4. å½’ä¸€åŒ–åˆ°0-100
        vec_47d = np.clip(vec_47d * 100, 0, 100)
        
        # 5. è½¬æ¢å›å­—å…¸
        return {f'dim_{i}': float(v) for i, v in enumerate(vec_47d)}
        
    def apply_cultural_perspective(
        self, 
        scores_47d: Dict[str, float], 
        perspective: str
    ) -> Dict[str, float]:
        '''åº”ç”¨æ–‡åŒ–è§†è§’æƒé‡'''
        weights = self.cultural_weights.get(perspective, np.ones(47))
        
        adjusted_scores = {}
        for i, (dim, score) in enumerate(scores_47d.items()):
            adjusted_scores[dim] = score * weights[i]
            
        return adjusted_scores
"""
```

##### 2.3 æœåŠ¡å±‚å®ç°
```python
# æ–‡ä»¶: wenxin-backend/app/vulca/services/vulca_service.py
"""
from typing import List, Dict, Optional
import asyncio
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy import select, insert, update
from ..models.vulca_model import VULCAEvaluation, VULCADimension
from ..core.vulca_core_adapter import VULCACoreAdapter

class VULCAService:
    '''VULCAä¸šåŠ¡é€»è¾‘æœåŠ¡'''
    
    def __init__(self, db_session: AsyncSession):
        self.db = db_session
        self.adapter = VULCACoreAdapter()
        
    async def evaluate_model(
        self, 
        model_id: int, 
        scores_6d: Dict[str, float]
    ) -> Dict:
        '''è¯„ä¼°å•ä¸ªæ¨¡å‹'''
        # 1. æ‰©å±•åˆ°47ç»´
        scores_47d = self.adapter.expand_6d_to_47d(scores_6d)
        
        # 2. è®¡ç®—8ä¸ªæ–‡åŒ–è§†è§’
        cultural_scores = {}
        for perspective in self.adapter.cultural_perspectives:
            cultural_scores[perspective] = self.adapter.apply_cultural_perspective(
                scores_47d, perspective
            )
        
        # 3. ä¿å­˜åˆ°æ•°æ®åº“
        evaluation = VULCAEvaluation(
            model_id=model_id,
            original_6d_scores=scores_6d,
            extended_47d_scores=scores_47d,
            cultural_perspectives=cultural_scores
        )
        
        self.db.add(evaluation)
        await self.db.commit()
        
        return {
            'model_id': model_id,
            'scores_6d': scores_6d,
            'scores_47d': scores_47d,
            'cultural_perspectives': cultural_scores
        }
        
    async def compare_models(
        self, 
        model_ids: List[int]
    ) -> Dict:
        '''æ¯”è¾ƒå¤šä¸ªæ¨¡å‹'''
        results = []
        
        for model_id in model_ids:
            # æŸ¥è¯¢æ•°æ®åº“è·å–è¯„åˆ†
            stmt = select(VULCAEvaluation).where(
                VULCAEvaluation.model_id == model_id
            ).order_by(VULCAEvaluation.evaluation_date.desc())
            
            result = await self.db.execute(stmt)
            evaluation = result.scalar_one_or_none()
            
            if evaluation:
                results.append({
                    'model_id': model_id,
                    'scores_47d': evaluation.extended_47d_scores,
                    'cultural_scores': evaluation.cultural_perspectives
                })
        
        # è®¡ç®—å·®å¼‚çŸ©é˜µ
        diff_matrix = self._calculate_difference_matrix(results)
        
        return {
            'models': results,
            'difference_matrix': diff_matrix,
            'summary': self._generate_comparison_summary(results)
        }
"""
```

##### 2.4 APIè·¯ç”±å®ç°
```python
# æ–‡ä»¶: wenxin-backend/app/vulca/vulca.py
"""
from fastapi import APIRouter, Depends, HTTPException
from typing import List, Dict
from ..services.vulca_service import VULCAService
from ..schemas.vulca_schema import (
    VULCAEvaluationRequest,
    VULCAEvaluationResponse,
    VULCAComparisonRequest,
    VULCAComparisonResponse
)

router = APIRouter(
    prefix="/api/v1/vulca",
    tags=["VULCA"]
)

@router.post("/evaluate", response_model=VULCAEvaluationResponse)
async def evaluate_model(
    request: VULCAEvaluationRequest,
    service: VULCAService = Depends(get_vulca_service)
):
    '''è¯„ä¼°æ¨¡å‹çš„47ç»´èƒ½åŠ›'''
    try:
        result = await service.evaluate_model(
            model_id=request.model_id,
            scores_6d=request.scores_6d
        )
        return VULCAEvaluationResponse(**result)
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

@router.post("/compare", response_model=VULCAComparisonResponse)
async def compare_models(
    request: VULCAComparisonRequest,
    service: VULCAService = Depends(get_vulca_service)
):
    '''æ¯”è¾ƒå¤šä¸ªæ¨¡å‹çš„47ç»´èƒ½åŠ›'''
    try:
        result = await service.compare_models(request.model_ids)
        return VULCAComparisonResponse(**result)
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

@router.get("/dimensions")
async def get_dimensions():
    '''è·å–47ä¸ªç»´åº¦çš„è¯¦ç»†ä¿¡æ¯'''
    dimensions = [
        {
            "id": f"dim_{i}",
            "name": f"Dimension {i}",
            "category": f"Category {i//10}",
            "description": f"Description for dimension {i}"
        }
        for i in range(47)
    ]
    return {"dimensions": dimensions}

@router.get("/info")
async def get_vulca_info():
    '''è·å–VULCAç³»ç»Ÿä¿¡æ¯'''
    return {
        "version": "2.0",
        "dimensions": {
            "original": 6,
            "extended": 47
        },
        "cultural_perspectives": 8,
        "algorithm": "correlation_matrix_expansion"
    }
"""
```

#### ğŸ¨ Phase 3: å‰ç«¯ç»„ä»¶æ·±åº¦å®ç° (90åˆ†é’Ÿ)

##### 3.1 åˆ›å»ºå‰ç«¯ç›®å½•
```bash
# åˆ›å»ºVULCAå‰ç«¯ç›®å½•
mkdir -p I:/website/wenxin-moyun/src/pages/vulca
mkdir -p I:/website/wenxin-moyun/src/components/vulca
mkdir -p I:/website/wenxin-moyun/src/hooks/vulca
mkdir -p I:/website/wenxin-moyun/src/utils/vulca
mkdir -p I:/website/wenxin-moyun/src/types/vulca
```

##### 3.2 ç±»å‹å®šä¹‰
```typescript
// æ–‡ä»¶: wenxin-moyun/src/types/vulca/index.ts
export interface VULCAScore6D {
  creativity: number;
  technique: number;
  emotion: number;
  context: number;
  innovation: number;
  impact: number;
}

export interface VULCAScore47D {
  [key: string]: number; // dim_0 to dim_46
}

export interface CulturalPerspective {
  western: number;
  eastern: number;
  african: number;
  latin_american: number;
  middle_eastern: number;
  south_asian: number;
  oceanic: number;
  indigenous: number;
}

export interface VULCAEvaluation {
  modelId: number;
  modelName: string;
  scores6D: VULCAScore6D;
  scores47D: VULCAScore47D;
  culturalPerspectives: CulturalPerspective;
  evaluationDate: string;
}

export interface VULCAComparison {
  models: VULCAEvaluation[];
  differenceMatrix: number[][];
  summary: {
    mostSimilar: [number, number];
    mostDifferent: [number, number];
    averageDifference: number;
  };
}
```

##### 3.3 ä¸»é¡µé¢ç»„ä»¶
```typescript
// æ–‡ä»¶: wenxin-moyun/src/pages/vulca/VULCADemoPage.tsx
import React, { useState, useEffect, useCallback } from 'react';
import { ComparisonView } from './ComparisonView';
import { RadarChart } from '../../components/vulca/RadarChart';
import { HeatMap } from '../../components/vulca/HeatMap';
import { DimensionToggle } from '../../components/vulca/DimensionToggle';
import { ModelSelector } from '../../components/vulca/ModelSelector';
import { ExportButton } from '../../components/vulca/ExportButton';
import { useVULCAData } from '../../hooks/vulca/useVULCAData';
import { VULCAEvaluation } from '../../types/vulca';

export const VULCADemoPage: React.FC = () => {
  const [selectedModels, setSelectedModels] = useState<number[]>([]);
  const [viewMode, setViewMode] = useState<'6d' | '47d'>('6d');
  const [visualizationType, setVisualizationType] = useState<'radar' | 'heatmap'>('radar');
  const [culturalPerspective, setCulturalPerspective] = useState<string>('eastern');
  
  const { evaluations, comparison, loading, error } = useVULCAData(selectedModels);
  
  const handleModelSelect = useCallback((modelId: number) => {
    setSelectedModels(prev => {
      if (prev.includes(modelId)) {
        return prev.filter(id => id !== modelId);
      }
      if (prev.length >= 5) {
        // æœ€å¤šæ¯”è¾ƒ5ä¸ªæ¨¡å‹
        return [...prev.slice(1), modelId];
      }
      return [...prev, modelId];
    });
  }, []);
  
  const handleExport = useCallback(() => {
    const data = {
      models: evaluations,
      comparison,
      exportDate: new Date().toISOString()
    };
    
    const blob = new Blob([JSON.stringify(data, null, 2)], {
      type: 'application/json'
    });
    
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `vulca-scores-${Date.now()}.json`;
    a.click();
    URL.revokeObjectURL(url);
  }, [evaluations, comparison]);
  
  if (loading) {
    return (
      <div className="flex items-center justify-center h-screen">
        <div className="animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-blue-500"></div>
      </div>
    );
  }
  
  if (error) {
    return (
      <div className="flex items-center justify-center h-screen">
        <div className="text-red-500 text-xl">Error: {error}</div>
      </div>
    );
  }
  
  return (
    <div className="container mx-auto px-4 py-8">
      <header className="mb-8">
        <h1 className="text-4xl font-bold mb-2">
          VULCA Multi-Dimensional Evaluation System
        </h1>
        <p className="text-gray-600">
          From 6 dimensions to 47 dimensions: Fine-grained AI model capability assessment
        </p>
      </header>
      
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* æ§åˆ¶é¢æ¿ */}
        <div className="lg:col-span-1 space-y-4">
          <div className="bg-white rounded-lg shadow p-6">
            <h2 className="text-xl font-semibold mb-4">Controls</h2>
            
            <div className="space-y-4">
              <ModelSelector
                models={availableModels}
                selectedModels={selectedModels}
                onModelSelect={handleModelSelect}
              />
              
              <DimensionToggle
                mode={viewMode}
                onModeChange={setViewMode}
              />
              
              <div className="flex gap-2">
                <button
                  onClick={() => setVisualizationType('radar')}
                  className={`px-4 py-2 rounded ${
                    visualizationType === 'radar' 
                      ? 'bg-blue-500 text-white' 
                      : 'bg-gray-200'
                  }`}
                >
                  Radar Chart
                </button>
                <button
                  onClick={() => setVisualizationType('heatmap')}
                  className={`px-4 py-2 rounded ${
                    visualizationType === 'heatmap' 
                      ? 'bg-blue-500 text-white' 
                      : 'bg-gray-200'
                  }`}
                >
                  Heat Map
                </button>
              </div>
              
              <select
                value={culturalPerspective}
                onChange={(e) => setCulturalPerspective(e.target.value)}
                className="w-full px-3 py-2 border rounded"
              >
                <option value="western">Western Perspective</option>
                <option value="eastern">Eastern Perspective</option>
                <option value="african">African Perspective</option>
                <option value="latin_american">Latin American</option>
                <option value="middle_eastern">Middle Eastern</option>
                <option value="south_asian">South Asian</option>
                <option value="oceanic">Oceanic</option>
                <option value="indigenous">Indigenous</option>
              </select>
              
              <ExportButton onClick={handleExport} />
            </div>
          </div>
        </div>
        
        {/* å¯è§†åŒ–åŒºåŸŸ */}
        <div className="lg:col-span-2">
          <div className="bg-white rounded-lg shadow p-6">
            <h2 className="text-xl font-semibold mb-4">
              {viewMode === '6d' ? '6-Dimensional' : '47-Dimensional'} Visualization
            </h2>
            
            {visualizationType === 'radar' ? (
              <RadarChart
                data={evaluations}
                dimensions={viewMode === '6d' ? 6 : 47}
                culturalPerspective={culturalPerspective}
              />
            ) : (
              <HeatMap
                data={evaluations}
                dimensions={viewMode === '6d' ? 6 : 47}
                culturalPerspective={culturalPerspective}
              />
            )}
          </div>
          
          {selectedModels.length >= 2 && (
            <div className="mt-6">
              <ComparisonView
                comparison={comparison}
                viewMode={viewMode}
              />
            </div>
          )}
        </div>
      </div>
    </div>
  );
};
```

##### 3.4 å¯¹æ¯”è§†å›¾ç»„ä»¶
```typescript
// æ–‡ä»¶: wenxin-moyun/src/pages/vulca/ComparisonView.tsx
import React from 'react';
import {
  BarChart, Bar, XAxis, YAxis, CartesianGrid,
  Tooltip, Legend, ResponsiveContainer
} from 'recharts';

export const ComparisonView: React.FC<ComparisonViewProps> = ({
  comparison,
  viewMode
}) => {
  const prepareData = () => {
    if (!comparison) return [];
    
    const dimensions = viewMode === '6d' 
      ? ['creativity', 'technique', 'emotion', 'context', 'innovation', 'impact']
      : Array.from({ length: 47 }, (_, i) => `dim_${i}`);
    
    return dimensions.map(dim => {
      const dataPoint: any = { dimension: dim };
      
      comparison.models.forEach((model, index) => {
        const scores = viewMode === '6d' 
          ? model.scores6D 
          : model.scores47D;
        dataPoint[`model_${index}`] = scores[dim] || 0;
      });
      
      return dataPoint;
    });
  };
  
  const data = prepareData();
  const colors = ['#8884d8', '#82ca9d', '#ffc658', '#ff7c7c', '#8dd1e1'];
  
  return (
    <div className="bg-white rounded-lg shadow p-6">
      <h2 className="text-xl font-semibold mb-4">
        Model Comparison ({viewMode === '6d' ? '6D' : '47D'})
      </h2>
      
      <div className="mb-4">
        <div className="grid grid-cols-2 gap-4">
          <div className="text-sm">
            <span className="font-medium">Most Similar Pair:</span>
            <span className="ml-2">
              Model {comparison?.summary.mostSimilar[0]} & {comparison?.summary.mostSimilar[1]}
            </span>
          </div>
          <div className="text-sm">
            <span className="font-medium">Most Different Pair:</span>
            <span className="ml-2">
              Model {comparison?.summary.mostDifferent[0]} & {comparison?.summary.mostDifferent[1]}
            </span>
          </div>
          <div className="text-sm">
            <span className="font-medium">Average Difference:</span>
            <span className="ml-2">{comparison?.summary.averageDifference.toFixed(2)}</span>
          </div>
        </div>
      </div>
      
      <ResponsiveContainer width="100%" height={400}>
        <BarChart data={data.slice(0, viewMode === '6d' ? 6 : 10)}>
          <CartesianGrid strokeDasharray="3 3" />
          <XAxis dataKey="dimension" />
          <YAxis />
          <Tooltip />
          <Legend />
          
          {comparison?.models.map((model, index) => (
            <Bar
              key={`model_${index}`}
              dataKey={`model_${index}`}
              fill={colors[index % colors.length]}
              name={model.modelName}
            />
          ))}
        </BarChart>
      </ResponsiveContainer>
      
      {viewMode === '47d' && (
        <div className="mt-4 text-sm text-gray-600">
          Note: Showing first 10 dimensions of 47 for clarity. 
          Export data to see all dimensions.
        </div>
      )}
    </div>
  );
};
```

#### ğŸ“Š Phase 4: æ•°æ®ç”Ÿæˆä¸è¿ç§» (60åˆ†é’Ÿ)

##### 4.1 æ•°æ®ç”Ÿæˆè„šæœ¬
```python
# æ–‡ä»¶: wenxin-backend/scripts/generate_vulca_data.py
"""
import json
import numpy as np
from datetime import datetime
import random

def generate_47d_scores(base_6d_scores):
    '''ç”Ÿæˆ47ç»´è¯„åˆ†'''
    # åˆ›å»ºç›¸å…³æ€§çŸ©é˜µ
    correlation_matrix = np.random.rand(6, 47)
    correlation_matrix = correlation_matrix / correlation_matrix.sum(axis=0)
    
    # åŸºç¡€6ç»´è½¬å‘é‡
    base_vector = np.array(list(base_6d_scores.values()))
    
    # æ‰©å±•åˆ°47ç»´
    extended_vector = np.dot(base_vector, correlation_matrix)
    
    # æ·»åŠ å˜åŒ–
    noise = np.random.normal(0, 0.05, 47)
    extended_vector = extended_vector + noise
    
    # å½’ä¸€åŒ–
    extended_vector = np.clip(extended_vector * 100, 0, 100)
    
    return {f'dim_{i}': float(v) for i, v in enumerate(extended_vector)}

def generate_cultural_scores(scores_47d):
    '''ç”Ÿæˆ8ä¸ªæ–‡åŒ–è§†è§’è¯„åˆ†'''
    perspectives = [
        'western', 'eastern', 'african', 'latin_american',
        'middle_eastern', 'south_asian', 'oceanic', 'indigenous'
    ]
    
    cultural_scores = {}
    for perspective in perspectives:
        # æ¯ä¸ªæ–‡åŒ–æœ‰ä¸åŒçš„æƒé‡åå¥½
        weights = np.random.dirichlet(np.ones(47))
        
        weighted_scores = []
        for dim, score in scores_47d.items():
            weighted_scores.append(score * weights[int(dim.split('_')[1])])
        
        cultural_scores[perspective] = np.mean(weighted_scores)
    
    return cultural_scores

# ç”Ÿæˆ15ä¸ªæ¨¡å‹çš„æ•°æ®
models = [
    {'id': 1, 'name': 'gpt-5', 'scores_6d': {
        'creativity': 88, 'technique': 92, 'emotion': 85,
        'context': 90, 'innovation': 87, 'impact': 89
    }},
    {'id': 2, 'name': 'claude-opus-4-1', 'scores_6d': {
        'creativity': 86, 'technique': 90, 'emotion': 88,
        'context': 87, 'innovation': 85, 'impact': 86
    }},
    # ... æ·»åŠ æ›´å¤šæ¨¡å‹
]

vulca_data = []
for model in models:
    scores_47d = generate_47d_scores(model['scores_6d'])
    cultural_scores = generate_cultural_scores(scores_47d)
    
    vulca_data.append({
        'model_id': model['id'],
        'model_name': model['name'],
        'scores_6d': model['scores_6d'],
        'scores_47d': scores_47d,
        'cultural_perspectives': cultural_scores,
        'evaluation_date': datetime.now().isoformat()
    })

# ä¿å­˜æ•°æ®
with open('vulca_evaluations.json', 'w') as f:
    json.dump(vulca_data, f, indent=2)

print(f"Generated VULCA data for {len(models)} models")
"""
```

##### 4.2 æ•°æ®åº“å¯¼å…¥è„šæœ¬
```python
# æ–‡ä»¶: wenxin-backend/scripts/import_vulca_data.py
"""
import asyncio
import json
from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession
from sqlalchemy.orm import sessionmaker
from app.vulca.models.vulca_model import VULCAEvaluation

async def import_data():
    # åˆ›å»ºæ•°æ®åº“è¿æ¥
    engine = create_async_engine(DATABASE_URL, echo=True)
    async_session = sessionmaker(
        engine, class_=AsyncSession, expire_on_commit=False
    )
    
    # è¯»å–ç”Ÿæˆçš„æ•°æ®
    with open('vulca_evaluations.json', 'r') as f:
        data = json.load(f)
    
    async with async_session() as session:
        for item in data:
            evaluation = VULCAEvaluation(
                model_id=item['model_id'],
                original_6d_scores=item['scores_6d'],
                extended_47d_scores=item['scores_47d'],
                cultural_perspectives=item['cultural_perspectives']
            )
            session.add(evaluation)
        
        await session.commit()
    
    print(f"Imported {len(data)} VULCA evaluations")

if __name__ == "__main__":
    asyncio.run(import_data())
"""
```

##### 4.3 Demoæ¡ˆä¾‹å‡†å¤‡
```json
// æ–‡ä»¶: data/vulca/demo_cases.json
{
  "cases": [
    {
      "id": 1,
      "title": "Technical Excellence vs Creative Innovation",
      "description": "Comparing models with high technical scores against those with creative strengths",
      "model_pairs": [
        {"model1": "gpt-5", "model2": "claude-opus-4-1"},
        {"model1": "gpt-4o", "model2": "deepseek-v3"}
      ],
      "key_insights": [
        "Technical models show consistent performance across structural dimensions",
        "Creative models excel in originality and emotional expression",
        "Cultural perspectives significantly affect interpretation"
      ]
    },
    {
      "id": 2,
      "title": "Eastern vs Western Cultural Alignment",
      "description": "Analyzing how different models align with various cultural perspectives",
      "model_groups": {
        "eastern_aligned": ["qwen-max", "yi-34b", "chatglm3"],
        "western_aligned": ["gpt-5", "claude-3-5", "llama-3"]
      },
      "findings": {
        "eastern_preference": ["harmony", "tradition", "collective_wisdom"],
        "western_preference": ["individualism", "innovation", "critical_thinking"]
      }
    }
    // ... 8 more cases
  ]
}
```

#### ğŸ§ª Phase 5: é›†æˆæµ‹è¯•å®æ–½ (60åˆ†é’Ÿ)

##### 5.1 åç«¯æµ‹è¯•å¥—ä»¶
```python
# æ–‡ä»¶: wenxin-backend/tests/test_vulca_integration.py
"""
import pytest
import asyncio
from httpx import AsyncClient
from app.main import app

@pytest.mark.asyncio
async def test_vulca_info_endpoint():
    async with AsyncClient(app=app, base_url="http://test") as client:
        response = await client.get("/api/v1/vulca/info")
        assert response.status_code == 200
        data = response.json()
        assert data["dimensions"]["extended"] == 47

@pytest.mark.asyncio
async def test_vulca_evaluate_endpoint():
    async with AsyncClient(app=app, base_url="http://test") as client:
        payload = {
            "model_id": 1,
            "scores_6d": {
                "creativity": 85,
                "technique": 90,
                "emotion": 82,
                "context": 88,
                "innovation": 86,
                "impact": 87
            }
        }
        response = await client.post("/api/v1/vulca/evaluate", json=payload)
        assert response.status_code == 200
        data = response.json()
        assert len(data["scores_47d"]) == 47
        assert len(data["cultural_perspectives"]) == 8

@pytest.mark.asyncio
async def test_vulca_compare_endpoint():
    async with AsyncClient(app=app, base_url="http://test") as client:
        payload = {"model_ids": [1, 2, 3]}
        response = await client.post("/api/v1/vulca/compare", json=payload)
        assert response.status_code == 200
        data = response.json()
        assert "difference_matrix" in data
        assert "summary" in data
"""
```

##### 5.2 å‰ç«¯æµ‹è¯•é…ç½®
```javascript
// æ–‡ä»¶: wenxin-moyun/tests/vulca.test.ts
import { render, screen, waitFor, fireEvent } from '@testing-library/react';
import { VULCADemoPage } from '../src/pages/vulca/VULCADemoPage';
import { ComparisonView } from '../src/pages/vulca/ComparisonView';

describe('VULCA Demo Page', () => {
  test('renders main page elements', () => {
    render(<VULCADemoPage />);
    
    expect(screen.getByText(/VULCA Multi-Dimensional/i)).toBeInTheDocument();
    expect(screen.getByText(/6 dimensions to 47 dimensions/i)).toBeInTheDocument();
  });
  
  test('toggles between 6D and 47D views', async () => {
    render(<VULCADemoPage />);
    
    const toggle = screen.getByRole('button', { name: /47D View/i });
    fireEvent.click(toggle);
    
    await waitFor(() => {
      expect(screen.getByText(/47-Dimensional/i)).toBeInTheDocument();
    });
  });
  
  test('exports data correctly', async () => {
    const mockDownload = jest.fn();
    global.URL.createObjectURL = jest.fn();
    global.document.createElement = jest.fn().mockReturnValue({
      click: mockDownload,
      href: '',
      download: ''
    });
    
    render(<VULCADemoPage />);
    
    const exportBtn = screen.getByRole('button', { name: /Export/i });
    fireEvent.click(exportBtn);
    
    expect(mockDownload).toHaveBeenCalled();
  });
});
```

##### 5.3 ç«¯åˆ°ç«¯æµ‹è¯•è„šæœ¬
```bash
#!/bin/bash
# æ–‡ä»¶: test_vulca_e2e.sh

echo "Starting VULCA E2E Test Suite..."

# 1. å¯åŠ¨åç«¯
echo "Starting backend server..."
cd I:/website/wenxin-backend
python -m uvicorn app.main:app --port 8001 &
BACKEND_PID=$!
sleep 5

# 2. æµ‹è¯•åç«¯å¥åº·æ£€æŸ¥
echo "Testing backend health..."
curl -f http://localhost:8001/health || exit 1

# 3. æµ‹è¯•VULCAç«¯ç‚¹
echo "Testing VULCA endpoints..."
curl -f http://localhost:8001/api/v1/vulca/info || exit 1

# 4. å¯åŠ¨å‰ç«¯
echo "Starting frontend server..."
cd I:/website/wenxin-moyun
npm run dev &
FRONTEND_PID=$!
sleep 5

# 5. è¿è¡ŒPlaywrightæµ‹è¯•
echo "Running Playwright tests..."
npm run test:vulca

# 6. æ¸…ç†
echo "Cleaning up..."
kill $BACKEND_PID
kill $FRONTEND_PID

echo "E2E tests completed!"
```

#### ğŸ­ Phase 6: Playwright MCPè‡ªåŠ¨åŒ–éªŒè¯ (è¯¦ç»†ç‰ˆ)

##### 6.1 Playwrighté…ç½®
```javascript
// æ–‡ä»¶: wenxin-moyun/playwright.vulca.config.ts
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './tests/vulca',
  fullyParallel: false,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: 1,
  reporter: [
    ['html', { outputFolder: 'playwright-report-vulca' }],
    ['json', { outputFile: 'test-results-vulca.json' }]
  ],
  
  use: {
    baseURL: 'http://localhost:5173',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
    video: 'retain-on-failure',
  },
  
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
  ],
  
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:5173',
    reuseExistingServer: !process.env.CI,
    timeout: 120 * 1000,
  },
});
```

##### 6.2 å®Œæ•´Playwrightæµ‹è¯•è„šæœ¬
```javascript
// æ–‡ä»¶: wenxin-moyun/tests/vulca/vulca-complete.spec.ts
import { test, expect, Page } from '@playwright/test';

// æµ‹è¯•æ•°æ®
const TEST_MODELS = ['gpt-5', 'claude-opus-4-1', 'gpt-4o'];
const EXPECTED_DIMENSIONS = {
  '6d': ['creativity', 'technique', 'emotion', 'context', 'innovation', 'impact'],
  '47d': Array.from({ length: 47 }, (_, i) => `dim_${i}`)
};

test.describe('VULCA Complete Integration Test', () => {
  let page: Page;
  
  test.beforeAll(async ({ browser }) => {
    page = await browser.newPage();
    
    // è®¾ç½®è¾ƒé•¿çš„è¶…æ—¶æ—¶é—´
    page.setDefaultTimeout(30000);
    
    // å¯ç”¨æ§åˆ¶å°æ—¥å¿—
    page.on('console', msg => console.log('Browser log:', msg.text()));
    
    // æ•è·ç½‘ç»œé”™è¯¯
    page.on('requestfailed', request => {
      console.error('Request failed:', request.url(), request.failure());
    });
  });
  
  test.afterAll(async () => {
    await page.close();
  });
  
  test('1. Navigate to VULCA Demo Page', async () => {
    // å¯¼èˆªåˆ°VULCAé¡µé¢
    await page.goto('/#/vulca-demo');
    
    // ç­‰å¾…é¡µé¢åŠ è½½
    await page.waitForLoadState('networkidle');
    
    // éªŒè¯æ ‡é¢˜
    await expect(page.locator('h1')).toContainText('VULCA');
    
    // æˆªå›¾
    await page.screenshot({ 
      path: 'screenshots/vulca-landing.png',
      fullPage: true 
    });
  });
  
  test('2. Test 6D View', async () => {
    // ç¡®ä¿åœ¨6Dæ¨¡å¼
    const toggle = page.locator('[data-testid="dimension-toggle"]');
    const currentMode = await toggle.getAttribute('data-mode');
    
    if (currentMode !== '6d') {
      await toggle.click();
      await page.waitForTimeout(500);
    }
    
    // éªŒè¯6ä¸ªç»´åº¦æ˜¾ç¤º
    for (const dim of EXPECTED_DIMENSIONS['6d']) {
      await expect(page.locator(`text=${dim}`)).toBeVisible();
    }
    
    // éªŒè¯é›·è¾¾å›¾
    const radarChart = page.locator('.radar-chart');
    await expect(radarChart).toBeVisible();
    
    // è·å–æ•°æ®ç‚¹æ•°é‡
    const dataPoints = await page.locator('.radar-dot').count();
    expect(dataPoints).toBe(6);
    
    await page.screenshot({ 
      path: 'screenshots/vulca-6d-view.png',
      fullPage: true 
    });
  });
  
  test('3. Switch to 47D View', async () => {
    // åˆ‡æ¢åˆ°47Dæ¨¡å¼
    await page.click('[data-testid="dimension-toggle"]');
    
    // ç­‰å¾…åŠ¨ç”»å®Œæˆ
    await page.waitForTimeout(1000);
    
    // éªŒè¯æ˜¾ç¤º47ç»´
    await expect(page.locator('text=47-Dimensional')).toBeVisible();
    
    // éªŒè¯æ•°æ®ç‚¹å¢åŠ 
    const dataPoints = await page.locator('.radar-dot').count();
    expect(dataPoints).toBe(47);
    
    await page.screenshot({ 
      path: 'screenshots/vulca-47d-view.png',
      fullPage: true 
    });
  });
  
  test('4. Select Multiple Models', async () => {
    // é€‰æ‹©æ¨¡å‹
    for (const model of TEST_MODELS) {
      await page.click(`[data-model="${model}"]`);
      await page.waitForTimeout(500);
    }
    
    // éªŒè¯é€‰ä¸­çš„æ¨¡å‹æ•°é‡
    const selectedModels = await page.locator('.model-selected').count();
    expect(selectedModels).toBe(TEST_MODELS.length);
    
    // éªŒè¯å¯¹æ¯”è§†å›¾å‡ºç°
    await expect(page.locator('.comparison-view')).toBeVisible();
    
    await page.screenshot({ 
      path: 'screenshots/vulca-model-selection.png',
      fullPage: true 
    });
  });
  
  test('5. Test Heat Map Visualization', async () => {
    // åˆ‡æ¢åˆ°çƒ­åŠ›å›¾
    await page.click('[data-viz="heatmap"]');
    
    // ç­‰å¾…æ¸²æŸ“
    await page.waitForSelector('.heatmap-container');
    
    // éªŒè¯çƒ­åŠ›å›¾ç½‘æ ¼
    const heatmapCells = await page.locator('.heatmap-cell').count();
    expect(heatmapCells).toBeGreaterThan(0);
    
    // æ‚¬åœæ˜¾ç¤ºtooltip
    await page.hover('.heatmap-cell:first-child');
    await expect(page.locator('.tooltip')).toBeVisible();
    
    await page.screenshot({ 
      path: 'screenshots/vulca-heatmap.png',
      fullPage: true 
    });
  });
  
  test('6. Test Cultural Perspectives', async () => {
    const perspectives = [
      'eastern', 'western', 'african', 'latin_american'
    ];
    
    for (const perspective of perspectives) {
      // é€‰æ‹©æ–‡åŒ–è§†è§’
      await page.selectOption('#cultural-perspective', perspective);
      
      // ç­‰å¾…æ•°æ®æ›´æ–°
      await page.waitForTimeout(500);
      
      // éªŒè¯æ•°æ®å˜åŒ–
      const scoreElements = await page.locator('.score-value').allTextContents();
      expect(scoreElements.length).toBeGreaterThan(0);
      
      // æˆªå›¾æ¯ä¸ªè§†è§’
      await page.screenshot({ 
        path: `screenshots/vulca-${perspective}.png`,
        fullPage: false 
      });
    }
  });
  
  test('7. Test Model Comparison', async () => {
    // ç¡®ä¿è‡³å°‘é€‰æ‹©äº†2ä¸ªæ¨¡å‹
    if ((await page.locator('.model-selected').count()) < 2) {
      await page.click(`[data-model="gpt-5"]`);
      await page.click(`[data-model="claude-opus-4-1"]`);
    }
    
    // éªŒè¯å¯¹æ¯”å›¾è¡¨
    await expect(page.locator('.comparison-chart')).toBeVisible();
    
    // éªŒè¯å·®å¼‚åˆ†æ•°
    await expect(page.locator('.difference-score')).toBeVisible();
    
    // éªŒè¯æœ€ç›¸ä¼¼/æœ€ä¸åŒçš„é…å¯¹
    await expect(page.locator('text=Most Similar Pair')).toBeVisible();
    await expect(page.locator('text=Most Different Pair')).toBeVisible();
    
    await page.screenshot({ 
      path: 'screenshots/vulca-comparison.png',
      fullPage: true 
    });
  });
  
  test('8. Test Data Export', async () => {
    // è®¾ç½®ä¸‹è½½ç›‘å¬
    const downloadPromise = page.waitForEvent('download');
    
    // ç‚¹å‡»å¯¼å‡ºæŒ‰é’®
    await page.click('[data-testid="export-button"]');
    
    // ç­‰å¾…ä¸‹è½½
    const download = await downloadPromise;
    
    // éªŒè¯æ–‡ä»¶å
    expect(download.suggestedFilename()).toContain('vulca-scores');
    
    // ä¿å­˜æ–‡ä»¶
    await download.saveAs('./test-downloads/' + download.suggestedFilename());
    
    // è¯»å–å¹¶éªŒè¯JSONç»“æ„
    const filePath = './test-downloads/' + download.suggestedFilename();
    // è¿™é‡Œå¯ä»¥æ·»åŠ æ–‡ä»¶å†…å®¹éªŒè¯
  });
  
  test('9. Test API Endpoints', async () => {
    // æµ‹è¯•ä¿¡æ¯ç«¯ç‚¹
    const infoResponse = await page.request.get('http://localhost:8001/api/v1/vulca/info');
    expect(infoResponse.ok()).toBeTruthy();
    
    const infoData = await infoResponse.json();
    expect(infoData.dimensions.extended).toBe(47);
    
    // æµ‹è¯•ç»´åº¦ç«¯ç‚¹
    const dimResponse = await page.request.get('http://localhost:8001/api/v1/vulca/dimensions');
    expect(dimResponse.ok()).toBeTruthy();
    
    const dimData = await dimResponse.json();
    expect(dimData.dimensions.length).toBe(47);
  });
  
  test('10. Performance Test', async () => {
    // è®°å½•æ€§èƒ½æŒ‡æ ‡
    const metrics = await page.evaluate(() => {
      const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;
      return {
        domContentLoaded: navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart,
        loadComplete: navigation.loadEventEnd - navigation.loadEventStart,
        firstPaint: performance.getEntriesByName('first-paint')[0]?.startTime || 0,
        firstContentfulPaint: performance.getEntriesByName('first-contentful-paint')[0]?.startTime || 0
      };
    });
    
    // éªŒè¯æ€§èƒ½æŒ‡æ ‡
    expect(metrics.loadComplete).toBeLessThan(2000); // é¡µé¢åŠ è½½<2s
    expect(metrics.firstContentfulPaint).toBeLessThan(1000); // FCP<1s
    
    console.log('Performance Metrics:', metrics);
  });
  
  test('11. Accessibility Test', async () => {
    // è¿è¡Œè¾…åŠ©åŠŸèƒ½æ£€æŸ¥
    const accessibilitySnapshot = await page.accessibility.snapshot();
    
    // åŸºæœ¬è¾…åŠ©åŠŸèƒ½éªŒè¯
    expect(accessibilitySnapshot?.children).toBeDefined();
    
    // æ£€æŸ¥ARIAæ ‡ç­¾
    const ariaLabels = await page.locator('[aria-label]').count();
    expect(ariaLabels).toBeGreaterThan(0);
    
    // æ£€æŸ¥é”®ç›˜å¯¼èˆª
    await page.keyboard.press('Tab');
    const focusedElement = await page.evaluate(() => document.activeElement?.tagName);
    expect(focusedElement).toBeDefined();
  });
  
  test('12. Error Handling Test', async () => {
    // æ¨¡æ‹Ÿç½‘ç»œé”™è¯¯
    await page.route('**/api/v1/vulca/**', route => route.abort());
    
    // åˆ·æ–°é¡µé¢
    await page.reload();
    
    // éªŒè¯é”™è¯¯å¤„ç†
    await expect(page.locator('text=/Error|Failed|Unable/i')).toBeVisible({ timeout: 10000 });
    
    // æ¢å¤ç½‘ç»œ
    await page.unroute('**/api/v1/vulca/**');
  });
});
```

##### 6.3 æµ‹è¯•æ‰§è¡Œå’ŒæŠ¥å‘Š
```bash
# æ–‡ä»¶: run_vulca_tests.sh
#!/bin/bash

echo "==================================="
echo "VULCA Integration Test Suite"
echo "==================================="

# è®¾ç½®é¢œè‰²è¾“å‡º
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# æµ‹è¯•è®¡æ•°å™¨
PASSED=0
FAILED=0

# å‡½æ•°ï¼šè¿è¡Œæµ‹è¯•å¹¶æ£€æŸ¥ç»“æœ
run_test() {
    local test_name=$1
    local test_command=$2
    
    echo -e "${YELLOW}Running: $test_name${NC}"
    
    if eval $test_command; then
        echo -e "${GREEN}âœ“ $test_name passed${NC}"
        ((PASSED++))
    else
        echo -e "${RED}âœ— $test_name failed${NC}"
        ((FAILED++))
    fi
    echo ""
}

# 1. ç¯å¢ƒæ£€æŸ¥
run_test "Environment Check" "python --version && node --version"

# 2. åç«¯å•å…ƒæµ‹è¯•
run_test "Backend Unit Tests" "cd I:/website/wenxin-backend && python -m pytest tests/test_vulca_integration.py -v"

# 3. å‰ç«¯å•å…ƒæµ‹è¯•
run_test "Frontend Unit Tests" "cd I:/website/wenxin-moyun && npm test -- --testPathPattern=vulca"

# 4. APIé›†æˆæµ‹è¯•
run_test "API Integration Tests" "curl -f http://localhost:8001/api/v1/vulca/info"

# 5. Playwright E2Eæµ‹è¯•
run_test "Playwright E2E Tests" "cd I:/website/wenxin-moyun && npx playwright test --config=playwright.vulca.config.ts"

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
echo "==================================="
echo "Test Results Summary"
echo "==================================="
echo -e "${GREEN}Passed: $PASSED${NC}"
echo -e "${RED}Failed: $FAILED${NC}"
echo ""

if [ $FAILED -eq 0 ]; then
    echo -e "${GREEN}All tests passed successfully!${NC}"
    
    # ç”ŸæˆHTMLæŠ¥å‘Š
    cd I:/website/wenxin-moyun
    npx playwright show-report playwright-report-vulca
    
    exit 0
else
    echo -e "${RED}Some tests failed. Please check the logs.${NC}"
    exit 1
fi
```

## é¢„æœŸæ•ˆæœ

### åŠŸèƒ½éªŒè¯æŒ‡æ ‡
- âœ… 6ç»´åˆ°47ç»´æ‰©å±•æˆåŠŸ
- âœ… 8ä¸ªæ–‡åŒ–è§†è§’è¯„åˆ†æ­£å¸¸
- âœ… æ¨¡å‹å¯¹æ¯”åŠŸèƒ½å®Œæ•´
- âœ… æ•°æ®å¯¼å‡ºåŠŸèƒ½æ­£å¸¸
- âœ… APIå“åº”æ—¶é—´<500ms
- âœ… é¡µé¢åŠ è½½æ—¶é—´<2s

### Playwrightæµ‹è¯•è¦†ç›–
- 12ä¸ªæ ¸å¿ƒæµ‹è¯•åœºæ™¯
- 100%åŠŸèƒ½è¦†ç›–ç‡
- æ€§èƒ½åŸºå‡†éªŒè¯
- è¾…åŠ©åŠŸèƒ½æµ‹è¯•
- é”™è¯¯å¤„ç†æµ‹è¯•

## é¢„æœŸæ•ˆæœ

### åŠŸèƒ½æ•ˆæœ
1. **ç»´åº¦æ‰©å±•**: ä»6ç»´æ‰©å±•åˆ°47ç»´ç»†ç²’åº¦è¯„æµ‹
2. **å¯¹æ¯”å±•ç¤º**: æ¸…æ™°å±•ç¤º6ç»´vs47ç»´è¯„æµ‹å·®å¼‚
3. **å¤šæ–‡åŒ–è§†è§’**: 8ä¸ªæ–‡åŒ–è§†è§’çš„æƒé‡è¯„åˆ†
4. **å¯è§†åŒ–**: é›·è¾¾å›¾ã€çƒ­åŠ›å›¾ã€å¯¹æ¯”æ¡å½¢å›¾

### æ€§èƒ½æŒ‡æ ‡
- APIå“åº”æ—¶é—´ < 500ms
- é¡µé¢åŠ è½½æ—¶é—´ < 2s
- æ•°æ®æŸ¥è¯¢æ—¶é—´ < 100ms
- å‰ç«¯æ¸²æŸ“å¸§ç‡ > 30fps

### ç”¨æˆ·ä½“éªŒ
- æ— ç¼åˆ‡æ¢6ç»´/47ç»´è§†å›¾
- ç›´è§‚çš„ç»´åº¦å¯¹æ¯”
- æµç•…çš„äº¤äº’ä½“éªŒ
- æ¸…æ™°çš„æ•°æ®å±•ç¤º

## Playwrightè‡ªåŠ¨åŒ–æµ‹è¯•æ–¹æ¡ˆ

### æµ‹è¯•ç¯å¢ƒè®¾ç½®
```javascript
// playwright.config.js
{
  baseURL: 'http://localhost:5173',
  use: {
    headless: false,
    viewport: { width: 1280, height: 720 },
    screenshot: 'only-on-failure'
  }
}
```

### æµ‹è¯•ç”¨ä¾‹è®¾è®¡

#### Test Suite 1: åç«¯APIæµ‹è¯•
```javascript
test.describe('VULCA API Tests', () => {
  test('è·å–47ç»´è¯„åˆ†æ•°æ®', async ({ page }) => {
    // 1. è®¿é—®APIç«¯ç‚¹
    // 2. éªŒè¯å“åº”çŠ¶æ€ç 200
    // 3. éªŒè¯è¿”å›æ•°æ®ç»“æ„
    // 4. éªŒè¯47ä¸ªç»´åº¦éƒ½å­˜åœ¨
  });

  test('6ç»´åˆ°47ç»´æ‰©å±•ç®—æ³•', async ({ page }) => {
    // 1. å‘é€6ç»´æ•°æ®
    // 2. éªŒè¯è¿”å›47ç»´æ•°æ®
    // 3. éªŒè¯æ‰©å±•ç®—æ³•æ­£ç¡®æ€§
  });

  test('æ¨¡å‹å¯¹æ¯”API', async ({ page }) => {
    // 1. è¯·æ±‚ä¸¤ä¸ªæ¨¡å‹å¯¹æ¯”
    // 2. éªŒè¯å¯¹æ¯”æ•°æ®å®Œæ•´
    // 3. éªŒè¯å·®å¼‚è®¡ç®—æ­£ç¡®
  });
});
```

#### Test Suite 2: å‰ç«¯é¡µé¢æµ‹è¯•
```javascript
test.describe('VULCA Demo Page Tests', () => {
  test('é¡µé¢åŠ è½½å’Œæ¸²æŸ“', async ({ page }) => {
    // 1. å¯¼èˆªåˆ°VULCAé¡µé¢
    await page.goto('/#/vulca-demo');
    
    // 2. éªŒè¯é¡µé¢æ ‡é¢˜
    await expect(page.locator('h1')).toContainText('VULCA');
    
    // 3. éªŒè¯ä¸»è¦ç»„ä»¶å­˜åœ¨
    await expect(page.locator('.comparison-view')).toBeVisible();
    
    // 4. æˆªå›¾ä¿å­˜
    await page.screenshot({ path: 'vulca-page.png' });
  });

  test('6ç»´vs47ç»´åˆ‡æ¢', async ({ page }) => {
    // 1. ç‚¹å‡»åˆ‡æ¢æŒ‰é’®
    await page.click('.dimension-toggle');
    
    // 2. éªŒè¯è§†å›¾åˆ‡æ¢
    await expect(page.locator('.radar-chart')).toBeVisible();
    
    // 3. éªŒè¯æ•°æ®æ›´æ–°
    await expect(page.locator('.dimension-count')).toContainText('47');
  });

  test('æ¨¡å‹é€‰æ‹©å’Œå¯¹æ¯”', async ({ page }) => {
    // 1. é€‰æ‹©ç¬¬ä¸€ä¸ªæ¨¡å‹
    await page.selectOption('#model1', 'gpt-5');
    
    // 2. é€‰æ‹©ç¬¬äºŒä¸ªæ¨¡å‹
    await page.selectOption('#model2', 'claude-opus-4-1');
    
    // 3. éªŒè¯å¯¹æ¯”å›¾è¡¨æ›´æ–°
    await expect(page.locator('.comparison-chart')).toBeVisible();
    
    // 4. éªŒè¯æ•°æ®å·®å¼‚æ˜¾ç¤º
    await expect(page.locator('.difference-score')).toBeVisible();
  });
});
```

#### Test Suite 3: æ•°æ®å¯è§†åŒ–æµ‹è¯•
```javascript
test.describe('VULCA Visualization Tests', () => {
  test('é›·è¾¾å›¾æ¸²æŸ“', async ({ page }) => {
    // 1. éªŒè¯é›·è¾¾å›¾SVGå…ƒç´ 
    await expect(page.locator('svg.radar-chart')).toBeVisible();
    
    // 2. éªŒè¯æ•°æ®ç‚¹æ•°é‡
    const dataPoints = await page.locator('.radar-dot').count();
    expect(dataPoints).toBe(47);
    
    // 3. äº¤äº’æµ‹è¯• - æ‚¬åœæ˜¾ç¤ºtooltip
    await page.hover('.radar-dot:first-child');
    await expect(page.locator('.tooltip')).toBeVisible();
  });

  test('çƒ­åŠ›å›¾æ¸²æŸ“', async ({ page }) => {
    // 1. åˆ‡æ¢åˆ°çƒ­åŠ›å›¾è§†å›¾
    await page.click('[data-view="heatmap"]');
    
    // 2. éªŒè¯çƒ­åŠ›å›¾ç½‘æ ¼
    const cells = await page.locator('.heatmap-cell').count();
    expect(cells).toBe(47 * 15); // 47ç»´ Ã— 15ä¸ªæ¨¡å‹
    
    // 3. éªŒè¯é¢œè‰²æ¸å˜
    const firstCell = await page.locator('.heatmap-cell:first-child');
    const bgColor = await firstCell.evaluate(el => 
      window.getComputedStyle(el).backgroundColor
    );
    expect(bgColor).toBeTruthy();
  });
});
```

#### Test Suite 4: ç«¯åˆ°ç«¯å·¥ä½œæµæµ‹è¯•
```javascript
test.describe('E2E Workflow Tests', () => {
  test('å®Œæ•´è¯„æµ‹æµç¨‹', async ({ page }) => {
    // 1. è®¿é—®ä¸»é¡µ
    await page.goto('/');
    
    // 2. å¯¼èˆªåˆ°VULCA Demo
    await page.click('text=VULCAè¯„æµ‹');
    
    // 3. é€‰æ‹©è¯„æµ‹æ¨¡å‹
    await page.selectOption('#model-select', 'gpt-5');
    
    // 4. æŸ¥çœ‹6ç»´è¯„åˆ†
    await expect(page.locator('.score-6d')).toContainText(/\d+\.\d+/);
    
    // 5. å±•å¼€åˆ°47ç»´
    await page.click('.expand-dimensions');
    
    // 6. éªŒè¯47ç»´æ•°æ®
    await expect(page.locator('.dimensions-list')).toBeVisible();
    const dimensions = await page.locator('.dimension-item').count();
    expect(dimensions).toBe(47);
    
    // 7. å¯¼å‡ºæ•°æ®
    await page.click('.export-data');
    const download = await page.waitForEvent('download');
    expect(download.suggestedFilename()).toContain('vulca-scores');
  });
});
```

### éªŒè¯æŒ‡æ ‡
1. **åŠŸèƒ½è¦†ç›–ç‡**: 100%æ ¸å¿ƒåŠŸèƒ½
2. **æµ‹è¯•é€šè¿‡ç‡**: > 95%
3. **æ€§èƒ½åŸºå‡†**: 
   - é¡µé¢åŠ è½½ < 2s
   - APIå“åº” < 500ms
   - å›¾è¡¨æ¸²æŸ“ < 1s
4. **è§†è§‰å›å½’**: æˆªå›¾å¯¹æ¯”æ— å¼‚å¸¸

### æµ‹è¯•æ‰§è¡Œå‘½ä»¤
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:vulca

# è¿è¡Œç‰¹å®šæµ‹è¯•å¥—ä»¶
npm run test:vulca:api
npm run test:vulca:ui
npm run test:vulca:e2e

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
npm run test:vulca:report
```

## å½“å‰è¿›åº¦
- ä»»åŠ¡æ–‡æ¡£åˆ›å»ºå®Œæˆ
- è®¡åˆ’ v1ï¼ˆåŸºç¡€ç‰ˆï¼‰åˆ¶å®šå®Œæˆ
- è®¡åˆ’ v2ï¼ˆUltra Thinkç‰ˆï¼‰åˆ¶å®šå®Œæˆ - åŒ…å«1500+è¡Œè¯¦ç»†å®æ–½ä»£ç 
- Playwrightæµ‹è¯•æ–¹æ¡ˆè®¾è®¡å®Œæˆï¼ˆ12ä¸ªæµ‹è¯•åœºæ™¯ï¼‰
- ç­‰å¾…å¼€å§‹æ‰§è¡ŒPhase 0ç¯å¢ƒé¢„æ£€æŸ¥

## å¾…è§£å†³é—®é¢˜
- [ ] ç¡®è®¤VULCAæºä»£ç ä½ç½®
- [ ] ç¡®è®¤æ•°æ®åº“è¡¨ç»“æ„
- [ ] ç¡®è®¤APIå¯†é’¥é…ç½®
- [ ] ç¡®è®¤éƒ¨ç½²ç¯å¢ƒè¦æ±‚

## ç”¨æˆ·å¯¹è¯è®°å½•
### ç¬¬1è½® [2025-09-05 12:10] - [ä»»åŠ¡ç¡®è®¤æ¨¡å¼]
**ç”¨æˆ·åŸæ–‡**: è¿›å…¥ä»»åŠ¡ç¡®è®¤æ¨¡å¼ åˆ›å»ºä»»åŠ¡ ç„¶å è¿›å…¥è®¡åˆ’æ¨¡å¼ è®¾è®¡ä¸€ä¸ªè¯¦ç»†çš„è®¡åˆ’ã€‚åŒæ—¶åŒ…æ‹¬é¢„æœŸçš„æ•ˆæœä»¥åŠä½¿ç”¨ playwright mcpè¿›è¡ŒéªŒè¯çš„æ­¥éª¤ã€‚
**å…³é”®è¦ç‚¹**: åˆ›å»ºVULCAæœ¬åœ°é›†æˆä»»åŠ¡ï¼Œåˆ¶å®šè¯¦ç»†è®¡åˆ’ï¼Œè®¾è®¡Playwrightè‡ªåŠ¨åŒ–æµ‹è¯•

### ç¬¬2è½® [2025-09-05 12:25] - [è®¡åˆ’æ¨¡å¼]
**ç”¨æˆ·åŸæ–‡**: å¾ˆå¥½ è¿›å…¥è®¡åˆ’æ¨¡å¼ ultra think è®¾è®¡ä¸€ä¸ªè¶³å¤Ÿè¯¦ç»†çš„è®¡åˆ’
**å…³é”®è¦ç‚¹**: è¦æ±‚ä½¿ç”¨ultra thinkæ–¹å¼åˆ¶å®šè¶…è¯¦ç»†çš„å®æ–½è®¡åˆ’ï¼ŒåŒ…å«å…·ä½“ä»£ç å®ç°